<!DOCTYPE html>
{% load static %}
<link rel="stylesheet" href="{% static "css/bootstrap.css" %}">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        var ans = "";
        var count = 0;

        function next() {
            document.getElementById('chat').innerHTML = "";
            document.getElementById('chat').innerHTML = "  <a href=\"#\" style=\"color: black\"  onclick=\"setvalue('Hi')\">Hi</a><br>\n" +
                "          <a href=\"#\" style=\";color: black\" onclick=\"setvalue('How are you')\">How are you</a><br>\n" +
                "          <a href=\"#\" style=\"color: black\" onclick=\"setvalue('How can i help you')\" >How can i help you</a><br>";
        }

        function send() {
            var msg = document.getElementById('mytext').value;
            ans += "<div><p style=\"color:blue\">" + msg + "</p></div>";
            document.getElementById('chat').innerHTML = ans;

            var xml = new XMLHttpRequest();
            xml.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    var ar = this.responseText;
                    count = count + 1;
                    ans += "<div  id='div" + count + "'><p style=\"color:black\">" + ar + "</p></div>";
                    ans += "<a href=\"#\" style=\"color: black\"  onclick=\"next('')\">Aything else?<br></a><hr>";
                    document.getElementById('chat').innerHTML = ans;

                    var target = document.getElementById('div' + count).offsetTop;
                    document.getElementById('chat').scrollTop = target;
                }
            };
            xml.open('GET', '/messageReply?msg=' + msg, true);
            xml.send();
        }

        function setvalue(value) {
            document.getElementById("mytext").value = value
        }

        function openForm() {
            document.getElementById("mytext").value = "";
            document.getElementById("myForm").style.display = "block";
            document.getElementById("chat").innerHTML = "<a href=\"#\" onclick=\"setvalue('Hi')\"> Hi </a><br>\n" +
                "    <a href=\"#\" onclick=\"setvalue('How are you')\">How are you</a><br>\n" +
                "    <a href=\"#\" onclick=\"setvalue('How can i help you')\">How can i help you</a><br>\n" +
                "    <a href=\"#\" onclick=\"setvalue('Tell me your queries')\">Tell me your queries</a><br>\n"
        }

        function closeForm() {
            document.getElementById("myForm").style.display = "none";
        }

    </script>
    <style>

        .chat-popup {
            display: none;
            position: fixed;
            bottom: 200px;
            right: 100px;
            border: 3px solid #f1f1f1;
            z-index: 9;
        }
    </style>
</head>
<body style="background: #d1ecf1">


{#main div front screen#}
<div style="position: fixed;z-index: 1000;bottom: 23px;right: 28px;width: 200px;padding: 16px 20px;">
    <img src="{% static "helpline.jpg" %}" width="60" height="60"><br>
    <a onclick="openForm()" href="#" style="background:#edecd6">May I Help You? </a>
</div>

{#form div#}
<div id="myForm" class="chat-popup" style="background: #ffeeba; height: 440px;width: 500px">
    <form action="#" class="form-container">
        <div class="container">
            <h2>How Can I Help You!!</h2>
            <hr>
            <label><u><b>Chat</b></u></label><br>
            <div id="chat" style="overflow-y:scroll; height:200px;">


            </div>
            <input style="height: 40px; width: 250px;" id="mytext" placeholder="enter your message" required><br><br>
            <button type="button" class="btn btn-success" onclick="send()" value="Send">Send</button>
            &nbsp
            <button type="button" class="btn btn-danger" onclick="closeForm()" value="Cancel">Close</button>
            <br>
        </div>
    </form>
</div>

</body>
</html><!DOCTYPE html>
{% load static %}
<link rel="stylesheet" href="{% static "css/bootstrap.css" %}">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        var ans = "";
        var count = 0;

        function next() {
            document.getElementById('chat').innerHTML = "";
            document.getElementById('chat').innerHTML = "  <a href=\"#\" style=\"color: black\"  onclick=\"setvalue(' Hello')\"> Hello</a><br>\n" +
                "          <a href=\"#\" style=\";color: black\" onclick=\"setvalue(' Who are you?')\"> Who are you?</a><br>\n" +
                "          <a href=\"#\" style=\";color: black\" onclick=\"setvalue(' Who created you?')\"> Who created you?</a><br>\n" +
                "          <a href=\"#\" style=\"color: black\" onclick=\"setvalue(' Which programming languages are used to create you?')\"> Which programming languages are used to create you?</a><br>";
        }

        function send() {
            var msg = document.getElementById('mytext').value;
            ans += "<div><p style=\"color:black\">" + msg + "</p></div>";
            document.getElementById('chat').innerHTML = ans;

            var xml = new XMLHttpRequest();
            xml.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    var ar = this.responseText;
                    count = count + 1;
                    ans += "<div id='div" + count + "'><p style=\"color:blue\">" + ar + "</p></div>";
                    ans += "<a href=\"#\" style=\"color: black\"  onclick=\"next('')\">Aything else?<br></a><hr>";
                    document.getElementById('chat').innerHTML = ans;

                    var target = document.getElementById('div' + count).offsetTop;
                    document.getElementById('chat').scrollTop = target;
                }
            };
            xml.open('GET', '/messageReply?msg=' + msg, true);
            xml.send();
        }

        function setvalue(value) {
            document.getElementById("mytext").value = value
        }

        function openForm() {
            document.getElementById("mytext").value = "";
            document.getElementById("myForm").style.display = "block";
            document.getElementById("chat").innerHTML = "<a href=\"#\" onclick=\"setvalue(' Hello')\"> Hello </a><br>\n" +
                "    <a href=\"#\" onclick=\"setvalue(' Who are you?')\"> Who are you?</a><br>\n" +
                "    <a href=\"#\" onclick=\"setvalue(' Who created you?')\"> Who created you?</a><br>\n" +
                "    <a href=\"#\" onclick=\"setvalue(' Which programming languages are used to create you?')\"> Which programming languages are used to create you?</a><br>\n"
        }

        function closeForm() {
            document.getElementById("myForm").style.display = "none";
        }

    </script>
    <style>

        .chat-popup {
            display: none;
            position: fixed;
            bottom: 200px;
            right: 100px;
            border: 3px solid #f1f1f1;
            z-index: 9;
        }
    </style>
</head>

<body style="background: #d1ecf1">
<h1 style="text-shadow: 4px 4px 5px #000000;font-size: 60px;color: #d57eff;text-align: left;margin-left: 200px;margin-top: 10px"><i><u>CHATBOT</u></i></h1>
{#main div front screen#}
<div style="position: fixed;z-index: 1000;bottom: 23px;right: 28px;width: 200px;padding: 16px 20px;">
    <img src="{% static "helpline.jpg" %}" width="80" height="80"><br>
    <a onclick="openForm()" href="#" style="background:#edecd6"><b>May I Help You?</b> </a>
</div>

{#form div#}
<div id="myForm" class="chat-popup" style="background: #ffeeba">
    <form action="#" class="form-container">
        <div class="container">
            <h2>How Can I Help You!!</h2>
            <hr>
            <label><u>Chat</u></label><br>
            <div id="chat" style="overflow-y:scroll; height:200px;">

            </div>
            <input style="height: 40px; width: 250px;" id="mytext" placeholder="enter your message" required><br><br>
            <button type="button" class="btn btn-success" onclick="send()" value="Send">Send</button>
            &nbsp
            <button type="button" class="btn btn-danger" onclick="closeForm()" value="Cancel">Close</button>
            <br>
        </div>
    </form>
</div>

</body>
</html>